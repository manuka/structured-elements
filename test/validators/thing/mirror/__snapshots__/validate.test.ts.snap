// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`validator('Thing', 'mirror').validate(
  { thing0: (Invalid), thing1: (Invalid), thing2: (Invalid), },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.0.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.0.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.0.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "0",
      "name": "Thing.array.0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.0.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "0.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "0",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "0",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.1.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.1.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.1.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "1",
      "name": "Thing.array.1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.1.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "1.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "1",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "1",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.2.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.2.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.2.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "2",
      "name": "Thing.array.2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.2.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "2.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "2",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "2",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.0.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.0.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.0.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-0",
      "name": "Thing.collection.Invalid Thing.id-0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.0.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-0.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-0",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-0",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-0": {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Invalid Thing.id-1": {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Invalid Thing.id-2": {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
      },
    },
    {
      "element": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.1.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.1.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.1.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-1",
      "name": "Thing.collection.Invalid Thing.id-1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.1.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-1.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-1",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-1",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-0": {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Invalid Thing.id-1": {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Invalid Thing.id-2": {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
      },
    },
    {
      "element": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.2.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.2.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.2.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-2",
      "name": "Thing.collection.Invalid Thing.id-2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.2.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-2.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-2",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-2",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-0": {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Invalid Thing.id-1": {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Invalid Thing.id-2": {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
      },
    },
  ],
  "salvage": {
    "array": [],
    "collection": {},
  },
  "subject": {
    "array": [
      {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
    ],
    "collection": {
      "Invalid Thing.id-0": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "Invalid Thing.id-1": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "Invalid Thing.id-2": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: (Invalid), thing1: (Invalid), thing2: (Valid), },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.0.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.0.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.0.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "0",
      "name": "Thing.array.0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.0.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "0.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "0",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "0",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Valid Thing.id-2",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.1.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.1.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.1.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "1",
      "name": "Thing.array.1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.1.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "1.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "1",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "1",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Valid Thing.id-2",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.0.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.0.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.0.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-0",
      "name": "Thing.collection.Invalid Thing.id-0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.0.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-0.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-0",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-0",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-0": {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Invalid Thing.id-1": {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Valid Thing.id-2": {
          "id": "Valid Thing.id-2",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
      },
    },
    {
      "element": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.1.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.1.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.1.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-1",
      "name": "Thing.collection.Invalid Thing.id-1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.1.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-1.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-1",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-1",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-0": {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Invalid Thing.id-1": {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Valid Thing.id-2": {
          "id": "Valid Thing.id-2",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
      },
    },
  ],
  "salvage": {
    "array": [
      {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Valid Thing.id-2": {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "subject": {
    "array": [
      {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Invalid Thing.id-0": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "Invalid Thing.id-1": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "Valid Thing.id-2": {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: (Invalid), thing1: (Invalid), thing2: undefined, },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.0.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.0.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.0.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "0",
      "name": "Thing.array.0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.0.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "0.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "0",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "0",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        undefined,
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.1.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.1.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.1.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "1",
      "name": "Thing.array.1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.1.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "1.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "1",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "1",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        undefined,
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.2",
          "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "2",
      "name": "Thing.array.2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.2",
            "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "2",
          "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        undefined,
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.0.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.0.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.0.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-0",
      "name": "Thing.collection.Invalid Thing.id-0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.0.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-0.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-0",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-0",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-0": {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Invalid Thing.id-1": {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "thing2": undefined,
      },
    },
    {
      "element": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.1.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.1.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.1.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-1",
      "name": "Thing.collection.Invalid Thing.id-1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.1.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-1.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-1",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-1",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-0": {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Invalid Thing.id-1": {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "thing2": undefined,
      },
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing2",
          "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing2",
      "name": "Thing.collection.thing2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing2",
            "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing2",
          "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "Invalid Thing.id-0": {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Invalid Thing.id-1": {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "thing2": undefined,
      },
    },
  ],
  "salvage": {
    "array": [],
    "collection": {},
  },
  "subject": {
    "array": [
      {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      undefined,
    ],
    "collection": {
      "Invalid Thing.id-0": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "Invalid Thing.id-1": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "thing2": undefined,
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: (Invalid), thing1: (Valid), thing2: (Invalid), },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.0.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.0.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.0.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "0",
      "name": "Thing.array.0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.0.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "0.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "0",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "0",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Valid Thing.id-1",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.2.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.2.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.2.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "2",
      "name": "Thing.array.2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.2.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "2.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "2",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "2",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Valid Thing.id-1",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.0.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.0.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.0.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-0",
      "name": "Thing.collection.Invalid Thing.id-0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.0.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-0.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-0",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-0",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-0": {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Invalid Thing.id-2": {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Valid Thing.id-1": {
          "id": "Valid Thing.id-1",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
      },
    },
    {
      "element": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.2.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.2.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.2.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-2",
      "name": "Thing.collection.Invalid Thing.id-2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.2.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-2.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-2",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-2",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-0": {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Invalid Thing.id-2": {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Valid Thing.id-1": {
          "id": "Valid Thing.id-1",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
      },
    },
  ],
  "salvage": {
    "array": [
      {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Valid Thing.id-1": {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "subject": {
    "array": [
      {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
    ],
    "collection": {
      "Invalid Thing.id-0": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "Invalid Thing.id-2": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "Valid Thing.id-1": {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: (Invalid), thing1: (Valid), thing2: (Valid), },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.0.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.0.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.0.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "0",
      "name": "Thing.array.0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.0.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "0.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "0",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "0",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Valid Thing.id-1",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        {
          "id": "Valid Thing.id-2",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.0.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.0.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.0.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-0",
      "name": "Thing.collection.Invalid Thing.id-0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.0.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-0.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-0",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-0",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-0": {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Valid Thing.id-1": {
          "id": "Valid Thing.id-1",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "Valid Thing.id-2": {
          "id": "Valid Thing.id-2",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
      },
    },
  ],
  "salvage": {
    "array": [
      {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Valid Thing.id-1": {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "Valid Thing.id-2": {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "subject": {
    "array": [
      {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Invalid Thing.id-0": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "Valid Thing.id-1": {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "Valid Thing.id-2": {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: (Invalid), thing1: (Valid), thing2: undefined, },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.0.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.0.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.0.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "0",
      "name": "Thing.array.0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.0.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "0.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "0",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "0",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Valid Thing.id-1",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        undefined,
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.2",
          "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "2",
      "name": "Thing.array.2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.2",
            "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "2",
          "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Valid Thing.id-1",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        undefined,
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.0.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.0.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.0.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-0",
      "name": "Thing.collection.Invalid Thing.id-0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.0.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-0.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-0",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-0",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-0": {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Valid Thing.id-1": {
          "id": "Valid Thing.id-1",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "thing2": undefined,
      },
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing2",
          "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing2",
      "name": "Thing.collection.thing2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing2",
            "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing2",
          "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "Invalid Thing.id-0": {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Valid Thing.id-1": {
          "id": "Valid Thing.id-1",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "thing2": undefined,
      },
    },
  ],
  "salvage": {
    "array": [
      {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Valid Thing.id-1": {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "subject": {
    "array": [
      {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      undefined,
    ],
    "collection": {
      "Invalid Thing.id-0": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "Valid Thing.id-1": {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "thing2": undefined,
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: (Invalid), thing1: undefined, thing2: (Invalid), },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.0.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.0.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.0.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "0",
      "name": "Thing.array.0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.0.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "0.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "0",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "0",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        undefined,
        {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.1",
          "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "1",
      "name": "Thing.array.1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.1",
            "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "1",
          "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        undefined,
        {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.2.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.2.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.2.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "2",
      "name": "Thing.array.2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.2.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "2.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "2",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "2",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        undefined,
        {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.0.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.0.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.0.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-0",
      "name": "Thing.collection.Invalid Thing.id-0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.0.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-0.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-0",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-0",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-0": {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Invalid Thing.id-2": {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "thing1": undefined,
      },
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing1",
          "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing1",
      "name": "Thing.collection.thing1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing1",
            "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing1",
          "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "Invalid Thing.id-0": {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Invalid Thing.id-2": {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "thing1": undefined,
      },
    },
    {
      "element": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.2.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.2.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.2.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-2",
      "name": "Thing.collection.Invalid Thing.id-2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.2.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-2.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-2",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-2",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-0": {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Invalid Thing.id-2": {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "thing1": undefined,
      },
    },
  ],
  "salvage": {
    "array": [],
    "collection": {},
  },
  "subject": {
    "array": [
      {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      undefined,
      {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
    ],
    "collection": {
      "Invalid Thing.id-0": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "Invalid Thing.id-2": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "thing1": undefined,
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: (Invalid), thing1: undefined, thing2: (Valid), },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.0.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.0.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.0.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "0",
      "name": "Thing.array.0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.0.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "0.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "0",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "0",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        undefined,
        {
          "id": "Valid Thing.id-2",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.1",
          "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "1",
      "name": "Thing.array.1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.1",
            "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "1",
          "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        undefined,
        {
          "id": "Valid Thing.id-2",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.0.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.0.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.0.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-0",
      "name": "Thing.collection.Invalid Thing.id-0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.0.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-0.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-0",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-0",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-0": {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Valid Thing.id-2": {
          "id": "Valid Thing.id-2",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "thing1": undefined,
      },
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing1",
          "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing1",
      "name": "Thing.collection.thing1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing1",
            "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing1",
          "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "Invalid Thing.id-0": {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Valid Thing.id-2": {
          "id": "Valid Thing.id-2",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "thing1": undefined,
      },
    },
  ],
  "salvage": {
    "array": [
      {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Valid Thing.id-2": {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "subject": {
    "array": [
      {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      undefined,
      {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Invalid Thing.id-0": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "Valid Thing.id-2": {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "thing1": undefined,
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: (Invalid), thing1: undefined, thing2: undefined, },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.0.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.0.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.0.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "0",
      "name": "Thing.array.0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.0.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "0.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "0",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "0",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        undefined,
        undefined,
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.1",
          "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "1",
      "name": "Thing.array.1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.1",
            "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "1",
          "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        undefined,
        undefined,
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.2",
          "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "2",
      "name": "Thing.array.2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.2",
            "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "2",
          "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        undefined,
        undefined,
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.0.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.0.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.0.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.0.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-0",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-0",
      "name": "Thing.collection.Invalid Thing.id-0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.0.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-0.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-0",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.0.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-0",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-0",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-0": {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "thing1": undefined,
        "thing2": undefined,
      },
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing1",
          "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing1",
      "name": "Thing.collection.thing1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing1",
            "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing1",
          "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "Invalid Thing.id-0": {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "thing1": undefined,
        "thing2": undefined,
      },
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing2",
          "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing2",
      "name": "Thing.collection.thing2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing2",
            "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing2",
          "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "Invalid Thing.id-0": {
          "id": "Invalid Thing.id-0",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "thing1": undefined,
        "thing2": undefined,
      },
    },
  ],
  "salvage": {
    "array": [],
    "collection": {},
  },
  "subject": {
    "array": [
      {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      undefined,
      undefined,
    ],
    "collection": {
      "Invalid Thing.id-0": {
        "id": "Invalid Thing.id-0",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "thing1": undefined,
      "thing2": undefined,
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: (Valid), thing1: (Invalid), thing2: (Invalid), },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.1.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.1.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.1.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "1",
      "name": "Thing.array.1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.1.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "1.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "1",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "1",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        {
          "id": "Valid Thing.id-0",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.2.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.2.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.2.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "2",
      "name": "Thing.array.2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.2.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "2.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "2",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "2",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        {
          "id": "Valid Thing.id-0",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.1.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.1.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.1.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-1",
      "name": "Thing.collection.Invalid Thing.id-1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.1.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-1.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-1",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-1",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-1": {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Invalid Thing.id-2": {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Valid Thing.id-0": {
          "id": "Valid Thing.id-0",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
      },
    },
    {
      "element": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.2.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.2.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.2.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-2",
      "name": "Thing.collection.Invalid Thing.id-2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.2.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-2.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-2",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-2",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-1": {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Invalid Thing.id-2": {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Valid Thing.id-0": {
          "id": "Valid Thing.id-0",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
      },
    },
  ],
  "salvage": {
    "array": [
      {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Valid Thing.id-0": {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "subject": {
    "array": [
      {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
    ],
    "collection": {
      "Invalid Thing.id-1": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "Invalid Thing.id-2": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "Valid Thing.id-0": {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: (Valid), thing1: (Invalid), thing2: (Valid), },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.1.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.1.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.1.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "1",
      "name": "Thing.array.1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.1.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "1.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "1",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "1",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        {
          "id": "Valid Thing.id-0",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Valid Thing.id-2",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.1.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.1.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.1.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-1",
      "name": "Thing.collection.Invalid Thing.id-1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.1.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-1.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-1",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-1",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-1": {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Valid Thing.id-0": {
          "id": "Valid Thing.id-0",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "Valid Thing.id-2": {
          "id": "Valid Thing.id-2",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
      },
    },
  ],
  "salvage": {
    "array": [
      {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Valid Thing.id-0": {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "Valid Thing.id-2": {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "subject": {
    "array": [
      {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Invalid Thing.id-1": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "Valid Thing.id-0": {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "Valid Thing.id-2": {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: (Valid), thing1: (Invalid), thing2: undefined, },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.1.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.1.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.1.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "1",
      "name": "Thing.array.1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.1.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "1.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "1",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "1",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        {
          "id": "Valid Thing.id-0",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        undefined,
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.2",
          "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "2",
      "name": "Thing.array.2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.2",
            "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "2",
          "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        {
          "id": "Valid Thing.id-0",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        undefined,
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.1.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.1.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.1.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-1",
      "name": "Thing.collection.Invalid Thing.id-1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.1.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-1.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-1",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-1",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-1": {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Valid Thing.id-0": {
          "id": "Valid Thing.id-0",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "thing2": undefined,
      },
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing2",
          "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing2",
      "name": "Thing.collection.thing2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing2",
            "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing2",
          "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "Invalid Thing.id-1": {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Valid Thing.id-0": {
          "id": "Valid Thing.id-0",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "thing2": undefined,
      },
    },
  ],
  "salvage": {
    "array": [
      {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Valid Thing.id-0": {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "subject": {
    "array": [
      {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      undefined,
    ],
    "collection": {
      "Invalid Thing.id-1": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "Valid Thing.id-0": {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "thing2": undefined,
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: (Valid), thing1: (Valid), thing2: (Invalid), },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.2.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.2.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.2.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "2",
      "name": "Thing.array.2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.2.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "2.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "2",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "2",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        {
          "id": "Valid Thing.id-0",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        {
          "id": "Valid Thing.id-1",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.2.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.2.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.2.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-2",
      "name": "Thing.collection.Invalid Thing.id-2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.2.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-2.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-2",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-2",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-2": {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Valid Thing.id-0": {
          "id": "Valid Thing.id-0",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "Valid Thing.id-1": {
          "id": "Valid Thing.id-1",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
      },
    },
  ],
  "salvage": {
    "array": [
      {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Valid Thing.id-0": {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "Valid Thing.id-1": {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "subject": {
    "array": [
      {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
    ],
    "collection": {
      "Invalid Thing.id-2": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "Valid Thing.id-0": {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "Valid Thing.id-1": {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: (Valid), thing1: (Valid), thing2: (Valid), },
  'Thing'
) 1`] = `
{
  "failures": [],
  "salvage": {
    "array": [
      {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Valid Thing.id-0": {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "Valid Thing.id-1": {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "Valid Thing.id-2": {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "subject": {
    "array": [
      {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Valid Thing.id-0": {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "Valid Thing.id-1": {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "Valid Thing.id-2": {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "valid": true,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: (Valid), thing1: (Valid), thing2: undefined, },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.2",
          "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "2",
      "name": "Thing.array.2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.2",
            "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "2",
          "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        {
          "id": "Valid Thing.id-0",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        {
          "id": "Valid Thing.id-1",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        undefined,
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing2",
          "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing2",
      "name": "Thing.collection.thing2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing2",
            "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing2",
          "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "Valid Thing.id-0": {
          "id": "Valid Thing.id-0",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "Valid Thing.id-1": {
          "id": "Valid Thing.id-1",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "thing2": undefined,
      },
    },
  ],
  "salvage": {
    "array": [
      {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Valid Thing.id-0": {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "Valid Thing.id-1": {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "subject": {
    "array": [
      {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      undefined,
    ],
    "collection": {
      "Valid Thing.id-0": {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "Valid Thing.id-1": {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "thing2": undefined,
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: (Valid), thing1: undefined, thing2: (Invalid), },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.1",
          "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "1",
      "name": "Thing.array.1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.1",
            "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "1",
          "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        {
          "id": "Valid Thing.id-0",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        undefined,
        {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.2.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.2.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.2.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "2",
      "name": "Thing.array.2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.2.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "2.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "2",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "2",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        {
          "id": "Valid Thing.id-0",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        undefined,
        {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing1",
          "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing1",
      "name": "Thing.collection.thing1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing1",
            "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing1",
          "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "Invalid Thing.id-2": {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Valid Thing.id-0": {
          "id": "Valid Thing.id-0",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "thing1": undefined,
      },
    },
    {
      "element": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.2.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.2.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.2.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-2",
      "name": "Thing.collection.Invalid Thing.id-2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.2.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-2.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-2",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-2",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-2": {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Valid Thing.id-0": {
          "id": "Valid Thing.id-0",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "thing1": undefined,
      },
    },
  ],
  "salvage": {
    "array": [
      {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Valid Thing.id-0": {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "subject": {
    "array": [
      {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      undefined,
      {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
    ],
    "collection": {
      "Invalid Thing.id-2": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "Valid Thing.id-0": {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "thing1": undefined,
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: (Valid), thing1: undefined, thing2: (Valid), },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.1",
          "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "1",
      "name": "Thing.array.1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.1",
            "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "1",
          "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        {
          "id": "Valid Thing.id-0",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        undefined,
        {
          "id": "Valid Thing.id-2",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing1",
          "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing1",
      "name": "Thing.collection.thing1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing1",
            "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing1",
          "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "Valid Thing.id-0": {
          "id": "Valid Thing.id-0",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "Valid Thing.id-2": {
          "id": "Valid Thing.id-2",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "thing1": undefined,
      },
    },
  ],
  "salvage": {
    "array": [
      {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Valid Thing.id-0": {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "Valid Thing.id-2": {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "subject": {
    "array": [
      {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      undefined,
      {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Valid Thing.id-0": {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "Valid Thing.id-2": {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "thing1": undefined,
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: (Valid), thing1: undefined, thing2: undefined, },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.1",
          "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "1",
      "name": "Thing.array.1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.1",
            "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "1",
          "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        {
          "id": "Valid Thing.id-0",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        undefined,
        undefined,
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.2",
          "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "2",
      "name": "Thing.array.2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.2",
            "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "2",
          "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        {
          "id": "Valid Thing.id-0",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        undefined,
        undefined,
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing1",
          "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing1",
      "name": "Thing.collection.thing1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing1",
            "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing1",
          "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "Valid Thing.id-0": {
          "id": "Valid Thing.id-0",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "thing1": undefined,
        "thing2": undefined,
      },
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing2",
          "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing2",
      "name": "Thing.collection.thing2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing2",
            "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing2",
          "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "Valid Thing.id-0": {
          "id": "Valid Thing.id-0",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "thing1": undefined,
        "thing2": undefined,
      },
    },
  ],
  "salvage": {
    "array": [
      {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Valid Thing.id-0": {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "subject": {
    "array": [
      {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      undefined,
      undefined,
    ],
    "collection": {
      "Valid Thing.id-0": {
        "id": "Valid Thing.id-0",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "thing1": undefined,
      "thing2": undefined,
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: undefined, thing1: (Invalid), thing2: (Invalid), },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.0",
          "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "0",
      "name": "Thing.array.0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.0",
            "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "0",
          "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        undefined,
        {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.1.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.1.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.1.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "1",
      "name": "Thing.array.1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.1.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "1.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "1",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "1",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        undefined,
        {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.2.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.2.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.2.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "2",
      "name": "Thing.array.2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.2.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "2.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "2",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "2",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        undefined,
        {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing0",
          "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing0",
      "name": "Thing.collection.thing0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing0",
            "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing0",
          "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "Invalid Thing.id-1": {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Invalid Thing.id-2": {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "thing0": undefined,
      },
    },
    {
      "element": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.1.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.1.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.1.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-1",
      "name": "Thing.collection.Invalid Thing.id-1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.1.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-1.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-1",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-1",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-1": {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Invalid Thing.id-2": {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "thing0": undefined,
      },
    },
    {
      "element": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.2.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.2.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.2.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-2",
      "name": "Thing.collection.Invalid Thing.id-2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.2.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-2.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-2",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-2",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-1": {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Invalid Thing.id-2": {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "thing0": undefined,
      },
    },
  ],
  "salvage": {
    "array": [],
    "collection": {},
  },
  "subject": {
    "array": [
      undefined,
      {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
    ],
    "collection": {
      "Invalid Thing.id-1": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "Invalid Thing.id-2": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "thing0": undefined,
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: undefined, thing1: (Invalid), thing2: (Valid), },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.0",
          "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "0",
      "name": "Thing.array.0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.0",
            "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "0",
          "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        undefined,
        {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Valid Thing.id-2",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.1.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.1.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.1.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "1",
      "name": "Thing.array.1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.1.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "1.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "1",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "1",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        undefined,
        {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        {
          "id": "Valid Thing.id-2",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing0",
          "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing0",
      "name": "Thing.collection.thing0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing0",
            "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing0",
          "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "Invalid Thing.id-1": {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Valid Thing.id-2": {
          "id": "Valid Thing.id-2",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "thing0": undefined,
      },
    },
    {
      "element": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.1.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.1.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.1.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-1",
      "name": "Thing.collection.Invalid Thing.id-1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.1.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-1.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-1",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-1",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-1": {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Valid Thing.id-2": {
          "id": "Valid Thing.id-2",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "thing0": undefined,
      },
    },
  ],
  "salvage": {
    "array": [
      {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Valid Thing.id-2": {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "subject": {
    "array": [
      undefined,
      {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Invalid Thing.id-1": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "Valid Thing.id-2": {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "thing0": undefined,
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: undefined, thing1: (Invalid), thing2: undefined, },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.0",
          "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "0",
      "name": "Thing.array.0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.0",
            "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "0",
          "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        undefined,
        {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        undefined,
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.1.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.1.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.1.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "1",
      "name": "Thing.array.1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.1.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "1.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "1",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "1",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        undefined,
        {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        undefined,
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.2",
          "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "2",
      "name": "Thing.array.2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.2",
            "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "2",
          "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        undefined,
        {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        undefined,
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing0",
          "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing0",
      "name": "Thing.collection.thing0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing0",
            "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing0",
          "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "Invalid Thing.id-1": {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "thing0": undefined,
        "thing2": undefined,
      },
    },
    {
      "element": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.1.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.1.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.1.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.1.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-1",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-1",
      "name": "Thing.collection.Invalid Thing.id-1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.1.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-1.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-1",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.1.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-1",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-1",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-1": {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "thing0": undefined,
        "thing2": undefined,
      },
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing2",
          "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing2",
      "name": "Thing.collection.thing2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing2",
            "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing2",
          "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "Invalid Thing.id-1": {
          "id": "Invalid Thing.id-1",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "thing0": undefined,
        "thing2": undefined,
      },
    },
  ],
  "salvage": {
    "array": [],
    "collection": {},
  },
  "subject": {
    "array": [
      undefined,
      {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      undefined,
    ],
    "collection": {
      "Invalid Thing.id-1": {
        "id": "Invalid Thing.id-1",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "thing0": undefined,
      "thing2": undefined,
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: undefined, thing1: (Valid), thing2: (Invalid), },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.0",
          "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "0",
      "name": "Thing.array.0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.0",
            "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "0",
          "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        undefined,
        {
          "id": "Valid Thing.id-1",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.2.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.2.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.2.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "2",
      "name": "Thing.array.2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.2.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "2.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "2",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "2",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        undefined,
        {
          "id": "Valid Thing.id-1",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing0",
          "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing0",
      "name": "Thing.collection.thing0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing0",
            "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing0",
          "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "Invalid Thing.id-2": {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Valid Thing.id-1": {
          "id": "Valid Thing.id-1",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "thing0": undefined,
      },
    },
    {
      "element": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.2.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.2.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.2.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-2",
      "name": "Thing.collection.Invalid Thing.id-2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.2.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-2.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-2",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-2",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-2": {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "Valid Thing.id-1": {
          "id": "Valid Thing.id-1",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "thing0": undefined,
      },
    },
  ],
  "salvage": {
    "array": [
      {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Valid Thing.id-1": {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "subject": {
    "array": [
      undefined,
      {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
    ],
    "collection": {
      "Invalid Thing.id-2": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "Valid Thing.id-1": {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "thing0": undefined,
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: undefined, thing1: (Valid), thing2: (Valid), },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.0",
          "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "0",
      "name": "Thing.array.0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.0",
            "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "0",
          "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        undefined,
        {
          "id": "Valid Thing.id-1",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        {
          "id": "Valid Thing.id-2",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing0",
          "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing0",
      "name": "Thing.collection.thing0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing0",
            "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing0",
          "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "Valid Thing.id-1": {
          "id": "Valid Thing.id-1",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "Valid Thing.id-2": {
          "id": "Valid Thing.id-2",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "thing0": undefined,
      },
    },
  ],
  "salvage": {
    "array": [
      {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Valid Thing.id-1": {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "Valid Thing.id-2": {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "subject": {
    "array": [
      undefined,
      {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Valid Thing.id-1": {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "Valid Thing.id-2": {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "thing0": undefined,
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: undefined, thing1: (Valid), thing2: undefined, },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.0",
          "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "0",
      "name": "Thing.array.0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.0",
            "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "0",
          "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        undefined,
        {
          "id": "Valid Thing.id-1",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        undefined,
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.2",
          "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "2",
      "name": "Thing.array.2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.2",
            "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "2",
          "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        undefined,
        {
          "id": "Valid Thing.id-1",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        undefined,
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing0",
          "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing0",
      "name": "Thing.collection.thing0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing0",
            "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing0",
          "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "Valid Thing.id-1": {
          "id": "Valid Thing.id-1",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "thing0": undefined,
        "thing2": undefined,
      },
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing2",
          "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing2",
      "name": "Thing.collection.thing2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing2",
            "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing2",
          "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "Valid Thing.id-1": {
          "id": "Valid Thing.id-1",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "thing0": undefined,
        "thing2": undefined,
      },
    },
  ],
  "salvage": {
    "array": [
      {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Valid Thing.id-1": {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "subject": {
    "array": [
      undefined,
      {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      undefined,
    ],
    "collection": {
      "Valid Thing.id-1": {
        "id": "Valid Thing.id-1",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "thing0": undefined,
      "thing2": undefined,
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: undefined, thing1: undefined, thing2: (Invalid), },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.0",
          "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "0",
      "name": "Thing.array.0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.0",
            "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "0",
          "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        undefined,
        undefined,
        {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.1",
          "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "1",
      "name": "Thing.array.1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.1",
            "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "1",
          "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        undefined,
        undefined,
        {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
      ],
    },
    {
      "element": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.2.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.2.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.2.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "2",
      "name": "Thing.array.2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.2.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "2.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "2",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "2",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": [
        undefined,
        undefined,
        {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing0",
          "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing0",
      "name": "Thing.collection.thing0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing0",
            "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing0",
          "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "Invalid Thing.id-2": {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "thing0": undefined,
        "thing1": undefined,
      },
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing1",
          "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing1",
      "name": "Thing.collection.thing1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing1",
            "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing1",
          "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "Invalid Thing.id-2": {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "thing0": undefined,
        "thing1": undefined,
      },
    },
    {
      "element": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": "Invalid Thing.type",
          "expectation": {
            "_StructuredElementsReference": {
              "structure": "item",
              "target": [Function],
            },
          },
          "failures": [
            {
              "element": "Invalid Thing.type",
              "expectation": [Function],
              "key": "(subject)",
              "name": "Thing.array.2.type",
              "reason": "(subject): functional expectation did not return true.",
              "subject": "Invalid Thing.type",
            },
          ],
          "key": "type",
          "name": "Thing.array.2.type",
          "reason": [
            {
              "expectation": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "failure": {
                "element": "Invalid Thing.type",
                "expectation": [Function],
                "key": "(subject)",
                "name": "Thing.array.2.type",
                "reason": "(subject): functional expectation did not return true.",
                "subject": "Invalid Thing.type",
              },
              "path": "type",
              "reason": "(subject): functional expectation did not return true.",
              "value": "Invalid Thing.type",
            },
          ],
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight: expected typeof number, got string",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
        {
          "element": "Invalid Thing.weight",
          "expectation": [
            "number",
            null,
          ],
          "key": "weight",
          "name": "Thing.array.2.weight",
          "reason": "weight is not null",
          "subject": {
            "id": "Invalid Thing.id-2",
            "name": "Invalid Thing.name",
            "parts": {},
            "type": "Invalid Thing.type",
            "weight": "Invalid Thing.weight",
          },
        },
      ],
      "key": "Invalid Thing.id-2",
      "name": "Thing.collection.Invalid Thing.id-2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.type",
            "expectation": [Function],
            "key": "(subject)",
            "name": "Thing.array.2.type",
            "reason": "(subject): functional expectation did not return true.",
            "subject": "Invalid Thing.type",
          },
          "path": "Invalid Thing.id-2.type",
          "reason": "(subject): functional expectation did not return true.",
          "value": "Invalid Thing.type",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight: expected typeof number, got string",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-2",
          "reason": "weight: expected typeof number, got string",
          "value": "Invalid Thing.weight",
        },
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": "Invalid Thing.weight",
            "expectation": [
              "number",
              null,
            ],
            "key": "weight",
            "name": "Thing.array.2.weight",
            "reason": "weight is not null",
            "subject": {
              "id": "Invalid Thing.id-2",
              "name": "Invalid Thing.name",
              "parts": {},
              "type": "Invalid Thing.type",
              "weight": "Invalid Thing.weight",
            },
          },
          "path": "Invalid Thing.id-2",
          "reason": "weight is not null",
          "value": "Invalid Thing.weight",
        },
      ],
      "subject": {
        "Invalid Thing.id-2": {
          "id": "Invalid Thing.id-2",
          "name": "Invalid Thing.name",
          "parts": {},
          "type": "Invalid Thing.type",
          "weight": "Invalid Thing.weight",
        },
        "thing0": undefined,
        "thing1": undefined,
      },
    },
  ],
  "salvage": {
    "array": [],
    "collection": {},
  },
  "subject": {
    "array": [
      undefined,
      undefined,
      {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
    ],
    "collection": {
      "Invalid Thing.id-2": {
        "id": "Invalid Thing.id-2",
        "name": "Invalid Thing.name",
        "parts": {},
        "type": "Invalid Thing.type",
        "weight": "Invalid Thing.weight",
      },
      "thing0": undefined,
      "thing1": undefined,
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: undefined, thing1: undefined, thing2: (Valid), },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.0",
          "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "0",
      "name": "Thing.array.0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.0",
            "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "0",
          "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        undefined,
        undefined,
        {
          "id": "Valid Thing.id-2",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.1",
          "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "1",
      "name": "Thing.array.1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.1",
            "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "1",
          "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        undefined,
        undefined,
        {
          "id": "Valid Thing.id-2",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing0",
          "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing0",
      "name": "Thing.collection.thing0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing0",
            "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing0",
          "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "Valid Thing.id-2": {
          "id": "Valid Thing.id-2",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "thing0": undefined,
        "thing1": undefined,
      },
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing1",
          "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing1",
      "name": "Thing.collection.thing1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing1",
            "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing1",
          "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "Valid Thing.id-2": {
          "id": "Valid Thing.id-2",
          "name": "Valid Thing.name",
          "parts": {},
          "type": "gadget",
          "weight": 1,
        },
        "thing0": undefined,
        "thing1": undefined,
      },
    },
  ],
  "salvage": {
    "array": [
      {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Valid Thing.id-2": {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    },
  },
  "subject": {
    "array": [
      undefined,
      undefined,
      {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
    ],
    "collection": {
      "Valid Thing.id-2": {
        "id": "Valid Thing.id-2",
        "name": "Valid Thing.name",
        "parts": {},
        "type": "gadget",
        "weight": 1,
      },
      "thing0": undefined,
      "thing1": undefined,
    },
  },
  "valid": false,
}
`;

exports[`validator('Thing', 'mirror').validate(
  { thing0: undefined, thing1: undefined, thing2: undefined, },
  'Thing'
) 1`] = `
{
  "failures": [
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.0",
          "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "0",
      "name": "Thing.array.0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.0",
            "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "0",
          "reason": "Thing.array.0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        undefined,
        undefined,
        undefined,
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.1",
          "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "1",
      "name": "Thing.array.1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.1",
            "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "1",
          "reason": "Thing.array.1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        undefined,
        undefined,
        undefined,
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.array.2",
          "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "2",
      "name": "Thing.array.2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.array.2",
            "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "2",
          "reason": "Thing.array.2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": [
        undefined,
        undefined,
        undefined,
      ],
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing0",
          "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing0",
      "name": "Thing.collection.thing0",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing0",
            "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing0",
          "reason": "Thing.collection.thing0 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "thing0": undefined,
        "thing1": undefined,
        "thing2": undefined,
      },
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing1",
          "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing1",
      "name": "Thing.collection.thing1",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing1",
            "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing1",
          "reason": "Thing.collection.thing1 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "thing0": undefined,
        "thing1": undefined,
        "thing2": undefined,
      },
    },
    {
      "element": undefined,
      "expectation": {
        "id": "string",
        "name": "string",
        "parts": {
          "_StructuredElementsReference": {
            "structure": "collection",
            "target": "Thing",
          },
        },
        "type": {
          "_StructuredElementsReference": {
            "structure": "item",
            "target": [Function],
          },
        },
        "weight": [
          "number",
          null,
        ],
      },
      "failures": [
        {
          "element": undefined,
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "key": "(subject)",
          "name": "Thing.collection.thing2",
          "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "subject": undefined,
        },
      ],
      "key": "thing2",
      "name": "Thing.collection.thing2",
      "reason": [
        {
          "expectation": {
            "id": "string",
            "name": "string",
            "parts": {
              "_StructuredElementsReference": {
                "structure": "collection",
                "target": "Thing",
              },
            },
            "type": {
              "_StructuredElementsReference": {
                "structure": "item",
                "target": [Function],
              },
            },
            "weight": [
              "number",
              null,
            ],
          },
          "failure": {
            "element": undefined,
            "expectation": {
              "id": "string",
              "name": "string",
              "parts": {
                "_StructuredElementsReference": {
                  "structure": "collection",
                  "target": "Thing",
                },
              },
              "type": {
                "_StructuredElementsReference": {
                  "structure": "item",
                  "target": [Function],
                },
              },
              "weight": [
                "number",
                null,
              ],
            },
            "key": "(subject)",
            "name": "Thing.collection.thing2",
            "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
            "subject": undefined,
          },
          "path": "thing2",
          "reason": "Thing.collection.thing2 expected to be a string-keyed record, but it isn't. It has typeof 'undefined'.",
          "value": undefined,
        },
      ],
      "subject": {
        "thing0": undefined,
        "thing1": undefined,
        "thing2": undefined,
      },
    },
  ],
  "salvage": {
    "array": [],
    "collection": {},
  },
  "subject": {
    "array": [
      undefined,
      undefined,
      undefined,
    ],
    "collection": {
      "thing0": undefined,
      "thing1": undefined,
      "thing2": undefined,
    },
  },
  "valid": false,
}
`;
